@page "/select-contactlink"
@using FATWA_DOMAIN.Models.Contact;
@using static FATWA_DOMAIN.Enums.Contact.ContactManagementEnum;

@layout MainLayout

<PageTitle>@translationState.Translate("Add_Contact_Link_Document")</PageTitle>
<RadzenContent Container="main">
	<ChildContent>
		<div class="row case-party-row">
			<div class="col-md-12">
				<RadzenTemplateForm Data="@CntContactRequests" Visible="@(CntContactRequests != null)" TItem="CntContactFileLink" Submit="@Form0Submit">
					<ChildContent>
						<div class="row pb-2">
							<div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
								<div class="form-group">
									<RadzenLabel Style="font-weight:bold" Text="@(translationState.Translate("Select_File"))" Component="ContactFile" />
									<RadzenDropDown Data="@FileJoins" AllowFiltering="true" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" AllowClear="true"
													TextProperty="FileNumber" ValueProperty="FileId" Placeholder="@translationState.Translate("Select")"
													Style="display:block;" @bind-Value="@(CntContactRequests.ReferenceId)" Name="ContactFile" />
								</div>
								@if (DropdownErrorShow)
								{
									<div>
										<RadzenLabel Text="@translationState.Translate("Required_Field")" Style="color:red;" />
									</div>
								}
							</div>
							<div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4" style="margin-top:25px;">
								<RadzenButton ButtonStyle="ButtonStyle.Light" Icon="add" Text="@translationState.Translate("Add_File")" Click="@( () => AddContactFileRequest((int)ContactLinkType.File))" />
							</div>
						</div>
						@if (CntContacts.CntContactRequestList.Count() != 0)
						{
							<div class="row tableContent table-responsive no-gutters pb-3">
								<RadzenDataGrid EmptyText="@translationState.Translate("No_record_found")"
											@ref="SignatureGridRef"
											AllowFiltering="false"
											FilterMode="Radzen.FilterMode.Advanced"
											AllowPaging="true"
											AllowSorting="true"
											Data="@FileRequestGridListShow"
											TItem="FileRequestGridList"
											PageSize="@systemSettingState.Grid_Pagination"
											PagerHorizontalAlign="Radzen.HorizontalAlign.Center"
											ColumnWidth="200px">
									<Columns>
										<RadzenDataGridColumn TItem="FileRequestGridList" Property="FileRequestNumber" Title="@translationState.Translate("File_Request_Number")" />
										<RadzenDataGridColumn TItem="FileRequestGridList" Property="FileRequestName" Title="@translationState.Translate("File_Request_Name")" />
										<RadzenDataGridColumn TItem="FileRequestGridList" Title="@translationState.Translate("Action")" Filterable="false" Sortable="false" TextAlign="TextAlign.Center">
											<Template Context="rowItem">
												<RadzenButton ButtonStyle="ButtonStyle.Danger" class="deleteIcon" Icon="delete_outline" title="@translationState.Translate("delete")" Size="ButtonSize.Small" Click="@(() =>DeleteGridData(rowItem))" @onclick:stopPropagation="true" />
											</Template>
										</RadzenDataGridColumn>
									</Columns>
								</RadzenDataGrid>
							</div>
						}
						@if (Thread.CurrentThread.CurrentUICulture.Name == "en-US")
						{
							<div class="row pt-2">
								<div class="col-12 p-0 d-flex justify-content-end">
									@if (CntContacts.CntContactRequestList.Count() != 0)
									{
										<RadzenButton ButtonType="Radzen.ButtonType.Submit" ButtonStyle="ButtonStyle.Primary" Text="@translationState.Translate("Submit")">
										</RadzenButton>
									}
									else
									{
										<RadzenButton ButtonType="Radzen.ButtonType.Submit" ButtonStyle="ButtonStyle.Primary" Text="@translationState.Translate("Submit")" Disabled="true">
										</RadzenButton>
									}
									<RadzenButton ButtonStyle="ButtonStyle.Light" style="margin-left: 0.2rem !important" Text="@translationState.Translate("Cancel")" Click="@CloseDialog">
									</RadzenButton>
								</div>
							</div>
						}
						else
						{
							<div class="row pt-2">
								<div class="col-12 p-0 d-flex justify-content-end">
									<RadzenButton ButtonStyle="ButtonStyle.Light" style="margin-left: 0.2rem !important" Text="@translationState.Translate("Cancel")" Click="@CloseDialog">
									</RadzenButton>
									@if (CntContacts.CntContactRequestList.Count() != 0)
									{
										<RadzenButton ButtonType="Radzen.ButtonType.Submit" ButtonStyle="ButtonStyle.Primary" Text="@translationState.Translate("Submit")">
										</RadzenButton>
									}
									else
									{
										<RadzenButton ButtonType="Radzen.ButtonType.Submit" ButtonStyle="ButtonStyle.Primary" Text="@translationState.Translate("Submit")" Disabled="true">
										</RadzenButton>
									}
								</div>
							</div>

						}
					</ChildContent>
				</RadzenTemplateForm>
			</div>
		</div>
	</ChildContent>
</RadzenContent>