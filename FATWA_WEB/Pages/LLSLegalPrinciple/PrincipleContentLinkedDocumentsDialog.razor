@using FATWA_DOMAIN.Models.LLSLegalPrinciple;
@using FATWA_DOMAIN.Models.ViewModel.LLSLegalPrinciple;
@using Syncfusion.Blazor.PdfViewer
@using Syncfusion.Blazor.PdfViewerServer
@using Syncfusion.Blazor.Navigations
@using static FATWA_DOMAIN.Enums.CaseManagementEnums
@using static FATWA_DOMAIN.Enums.LegalPrinciple.LegalPrincipleEnum
@layout MainLayout

 <SfPdfViewerServer EnableNavigationToolbar="false"
                   ZoomMode="ZoomMode.FitToWidth"
                   Width="100%"
                   Height="600px"
                   ID="pdfviewer1"
                   DownloadFileName="@DownloadFileName"
                   DocumentPath="@DocumentPath"
                   @ref="@pdfViewer"
                   ToolbarSettings="@ToolbarSettings"
                   EnableRtl="@(Thread.CurrentThread.CurrentUICulture.Name == "en-US" ? false : true)" Locale="@(Thread.CurrentThread.CurrentUICulture.Name)"
                   InteractionMode="InteractionMode.Pan">
    <PdfViewerEvents DocumentLoaded="DocumentLoaded"></PdfViewerEvents>
</SfPdfViewerServer>

<div class="row no-gutters pb-2">

</div>
<div class="row no-gutters">
        <div class="col-md-8 pt-1 ">
            @switch (@SelectedGrid)
            {
            case (int)JudgementsTabsEnums.AppealJudgements:
                    <RadzenHeading Size="H1" class="pageTitle" Text="@translationState.Translate("Appeal_Judgement_Linked_Documents")" />
                    break;
            case (int)JudgementsTabsEnums.SupremeJudgements:
                <RadzenHeading Size="H1" class="pageTitle" Text="@translationState.Translate("Supreme_Judgement_Linked_Documents")" />
                break;
            case (int) JudgementsTabsEnums.LegalAdvice:
                <RadzenHeading Size="H1" class="pageTitle" Text="@translationState.Translate("Legal_Advice_Linked_Documents")" />
                break;
            case (int) JudgementsTabsEnums.KuwaitAlYawm:
                <RadzenHeading Size="H1" class="pageTitle" Text="@translationState.Translate("KuwaitAlYawm_Linked_Documents")" />
                break;
            case (int)JudgementsTabsEnums.Others:
                <RadzenHeading Size="H1" class="pageTitle" Text="@translationState.Translate("Other_Linked_Documents")" />
                break;
            default:
            break;
            }
    </div>
    <div class="col-md-4 px-0 pb-3" style="text-align-last: end;">
        <RadzenButton class="addBtn" Style="border-radius:20px 0px 0px 20px !important;" Icon="arrow_back_ios_new" Click="OnClickPrevious" Disabled="@isPreviousDisabled" />
        <RadzenButton class="addBtn"
                      Style="border-radius:0px 20px 20px 0px !important;"
                      Icon="arrow_forward_ios"
                       Click="OnClickNext" Disabled="@isNextDisabled" />
    </div>
</div>
<div class="row tableContent table-responsive no-gutters pb-3">
    @if (SelectedGrid == (int)JudgementsTabsEnums.AppealJudgements || SelectedGrid == (int)JudgementsTabsEnums.SupremeJudgements)
    {
        <RadzenDataGrid EmptyText="@translationState.Translate("No_record_found")"
                        @ref="AppealSupremeFileGrid"
                        AllowFiltering="false"
                        FilterMode="Radzen.FilterMode.Advanced"
                        AllowPaging="true"
                        AllowSorting="true"
                        Data="@(AppealSupremeLinkedDocuments.Where(x=>x.CourtTypeId == (SelectedGrid == (int)JudgementsTabsEnums.AppealJudgements ? (int)CourtTypeEnum.Appeal : (int)CourtTypeEnum.Supreme)))"
                        TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM"
                        ShowPagingSummary="true">
            <Columns>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM" Filterable="false" Title="@translationState.Translate("Action")" Width="80px" Sortable="false" TextAlign="TextAlign.Center">
                    <Template Context="filedetails">
                        @{
                            string result = (filedetails.ReferenceId.ToString() + filedetails.UploadedDocumentId.ToString() + filedetails.PageNumber.ToString());

                            if (result != pdfViewer.DownloadFileName)
                            {
                                <RadzenButton ButtonStyle="ButtonStyle.Primary" Icon="visibility" class="addIcon" title="@translationState.Translate("View")" Size="ButtonSize.Medium" Click="@((args) => OnGridViewClick(filedetails))" @onclick:stopPropagation="true" />
                            }
                        }
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM" Property=@(Thread.CurrentThread.CurrentUICulture.Name == "en-US" ? "JudgementTypeEn" : "JudgementTypeAr") Title="@translationState.Translate("Judgement_Type")" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM" Property="JudgementDate" Title="@translationState.Translate("Judgement_Date")" FormatString="{0:dd/MM/yyyy}" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM" Property=@(Thread.CurrentThread.CurrentUICulture.Name == "en-US" ? "CourtEn" : "CourtAr") Title="@translationState.Translate("Court")" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM" Property=@(Thread.CurrentThread.CurrentUICulture.Name == "en-US" ? "ChamberNameEn" : "ChamberNameAr") Title="@translationState.Translate("Chamber_Name")" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM" Property="ChamberNumber" Title="@translationState.Translate("Chamber_Number")" Width="180px" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM" Property="CANNumber" Title="@translationState.Translate("CAN_Number")" Width="180px" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM" Property="CaseNumber" Title="@translationState.Translate("Case_Number")" Width="120px" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleAppealSupremenContentLinkedDocVM" Property="PageNumber" Title="@translationState.Translate("Page_Number")" Width="120px" />
            </Columns>
        </RadzenDataGrid>
    }
    else if (SelectedGrid == (int)JudgementsTabsEnums.LegalAdvice)
    {
        <RadzenDataGrid EmptyText="@translationState.Translate("No_record_found")"
                        AllowFiltering="false"
                        FilterMode="Radzen.FilterMode.Advanced"
                        AllowPaging="true"
                        AllowSorting="true"
                        Data="@LegalAdviceLinkedDocuments"
                        TItem="LLSLegalPrincipleLegalAdviceContentLinkedDocVM"
                        ShowPagingSummary="true">
            <Columns>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleLegalAdviceContentLinkedDocVM" Filterable="false" Title="@translationState.Translate("Action")" Width="80px" Sortable="false" TextAlign="TextAlign.Center">
                    <Template Context="filedetails">
                        @{
                            string result = (filedetails.ReferenceId.ToString() + filedetails.UploadedDocumentId.ToString() + filedetails.PageNumber.ToString());

                            if (result != pdfViewer.DownloadFileName)
                            {
                                <RadzenButton ButtonStyle="ButtonStyle.Primary" Icon="visibility" class="addIcon" title="@translationState.Translate("View")" Size="ButtonSize.Medium" Click="@((args) => OnGridViewClick(filedetails))" @onclick:stopPropagation="true" />
                            }
                        }
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleLegalAdviceContentLinkedDocVM" Property="CreatedDate" Title="@translationState.Translate("Created_Date")" FormatString="{0:dd/MM/yyyy}" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleLegalAdviceContentLinkedDocVM" Property="FinalDocFileName" Title="@translationState.Translate("File_Name")" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleLegalAdviceContentLinkedDocVM" Property="FileNumber" Title="@translationState.Translate("File_Number")" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleLegalAdviceContentLinkedDocVM" Property="PageNumber" Title="@translationState.Translate("Page_Number")" Width="120px" />

            </Columns>
        </RadzenDataGrid>
    }

    else if (SelectedGrid == (int)JudgementsTabsEnums.KuwaitAlYawm)
    {
        <RadzenDataGrid EmptyText="@translationState.Translate("No_record_found")"
                        AllowFiltering="false"
                        FilterMode="Radzen.FilterMode.Advanced"
                        AllowPaging="true"
                        AllowSorting="true"
                        Data="@KuwaitAlYoumLinkedDocuments"
                        TItem="LLSLegalPrincipleKuwaitAlYoumContentLinkedDocVM"
                        ShowPagingSummary="true">
            <Columns>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleKuwaitAlYoumContentLinkedDocVM" Filterable="false" Title="@translationState.Translate("Action")" Width="80px" Sortable="false" TextAlign="TextAlign.Center">
                    <Template Context="filedetails">
                        @{
                            string result = (filedetails.ReferenceId.ToString() + filedetails.UploadedDocumentId.ToString() + filedetails.PageNumber.ToString());

                            if (result != pdfViewer.DownloadFileName)
                            {
                                <RadzenButton ButtonStyle="ButtonStyle.Primary" Icon="visibility" class="addIcon" title="@translationState.Translate("View")" Size="ButtonSize.Medium" Click="@((args) => OnGridViewClick(filedetails))" @onclick:stopPropagation="true" />
                            }
                        }
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleKuwaitAlYoumContentLinkedDocVM" Property="DocumentTitle" Title="@translationState.Translate("Document_Title")"> </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleKuwaitAlYoumContentLinkedDocVM" Property="PublicationDate" Width="100px" FormatString="{0:dd/MM/yyyy}" Title="@translationState.Translate("Publication_Date")"> </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleKuwaitAlYoumContentLinkedDocVM" Property="PublicationDateHijri" Width="130px" Title="@translationState.Translate("Publication_Date_Hijri")"> </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleKuwaitAlYoumContentLinkedDocVM" Property="EditionNumber" Title="@translationState.Translate("Edition_Number")"/>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleKuwaitAlYoumContentLinkedDocVM" Property="PageNumber" Title="@translationState.Translate("Page_Number")" Width="120px" />

            </Columns>
        </RadzenDataGrid>
    }

    else if (SelectedGrid == (int)JudgementsTabsEnums.Others)
    {
        <RadzenDataGrid EmptyText="@translationState.Translate("No_record_found")"
                        AllowFiltering="false"
                        FilterMode="Radzen.FilterMode.Advanced"
                        AllowPaging="true"
                        AllowSorting="true"
                        Data="@OthersLinkedDocuments"
                        TItem="LLSLegalPrincipleOthersContentLinkedDocVM"
                        ShowPagingSummary="true">
            <Columns>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleOthersContentLinkedDocVM" Filterable="false" Title="@translationState.Translate("Action")" Width="80px" Sortable="false" TextAlign="TextAlign.Center">
                    <Template Context="filedetails">
                        @{
                            string result = (filedetails.ReferenceId.ToString() + filedetails.UploadedDocumentId.ToString() + filedetails.PageNumber.ToString());

                            if (result != pdfViewer.DownloadFileName)
                            {
                                <RadzenButton ButtonStyle="ButtonStyle.Primary" Icon="visibility" class="addIcon" title="@translationState.Translate("View")" Size="ButtonSize.Medium" Click="@((args) => OnGridViewClick(filedetails))" @onclick:stopPropagation="true" />
                            }
                        }
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="LLSLegalPrincipleOthersContentLinkedDocVM" Property="DocumentDate" Title="@translationState.Translate("Document_Date")" FormatString="{0:dd/MM/yyyy}" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleOthersContentLinkedDocVM" Property="OtherAttachmentType" Title="@translationState.Translate("Document_Type")" />
                <RadzenDataGridColumn TItem="LLSLegalPrincipleOthersContentLinkedDocVM" Property="PageNumber" Title="@translationState.Translate("Page_Number")" />
            </Columns>
        </RadzenDataGrid>
    } 
 </div>
