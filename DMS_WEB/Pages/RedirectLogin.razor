@inject NavigationManager navigationManager
  
 @code {
     [CascadingParameter]
     public Task<AuthenticationState> StateAuthenticate { get; set; }
  
     protected override async Task OnInitializedAsync()
     {
         var authenticationState = await StateAuthenticate;
         if (authenticationState?.User?.Identity is null || !authenticationState.User.Identity.IsAuthenticated)
         {
             var returnUri = navigationManager.ToBaseRelativePath(navigationManager.Uri);
             if (string.IsNullOrWhiteSpace(returnUri))
             {
                 navigationManager.NavigateTo("/Login", true);
             }
             else
             {
                 navigationManager.NavigateTo($"/Login?returnUrl={returnUri}", true);
             }
         }
     }
 } 